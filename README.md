# OS_HW4
# ОС ИДЗ№4 ВАРИАНТ№18
БПИ216 Дюгай Андрей Владимирович

18. Задача о картинной галерее. Вахтер–процесс следит за тем, чтобы в картинной галерее одновременно было не более 50 процессов– посетителей. Для обозрения представлены 5 картин. Посетитель случайным образом ходит от картины к картине, и если на картину любуются более чем десять посетителей, он стоит в стороне и ждет, пока число желающих увидеть картину не станет меньше. Посетитель может покинуть галерею, когда просмотрит все картины. В галерею также пытаются постоянно зайти новые посетители, которые ожидают своей очереди, если та заполнена. Создать приложение, моделирующее однодневную работу картинной галереи. Время нахождения возле картины для каждого посетителя является случайной величиной в некотором диапазоне.

отличия помимо небольшой замены параметров + отсутсвие accept и listen от предыдущей версии (TCP) в том, что взаимодействие сервера и клиента было слегка изменено как раз таки в виду того, что нет момента с подключением клиента (на стороне сервера), поэтому дополнительно обрабатывается запрос завершения

visitors.c содержит код логики посетителей

В цикле на число посетителей:
+ создается процесс (посетитель)
+ процесс запрашивает разрешение на вход от вахтера (больше 50 посетителей внутри выставки не будет)
+ процесс запускает функцию просмотра картин
+ процесс сообщает вахтеру о выходе

В функции просмотра картин делается 5 запросов на просмотр картин (соответствующие 5 картинам, порядок случаен), процесс засыает на случайное время, затем сообщается о конце просмтора картины.

watchman.c соответственно получает запросы на вход/просмотр картины и выдает ответ. Если в данный момент предельное количество посетителей на картине/выставке в целом, то вахтер говорит посетителю ждать. Иначе он дает зайти/посмотреть картину

view.c содержит код клиента, который выодит информацию о происходящем на выставке БЕЗ служебной информации

Программа visitors выводит техническую информацию об отправленных/полученных запросах и о подключении к серверу

watchman (сервер) выводит аналогичную информацию + обычным текстом отображает поведение посетителей вместо их запросов (так нагляднее т.к. сервер может дать посетителям порядковые номера, а они в свою очередь понятия не имеют о том, какой у них порядковый номер + по сути запускается параллельно много раз программа посетителя, что делает это еще не удобнее)

view выодит информацию о происходящем на выставке в ЧИСТОМ ВИДЕ т.е БЕЗ служебной информации. (получает данные с сервера)

в соответсвии перечисленным программам есть файлы с выводом:
+ watchman.txt
+ view.txt
+ visitors.txt

cleaner.c и a.out - это лишь для того, чтобы очищать семафоры, если что-то пошло не так

Ожидаемая оценка 7
